<!doctype html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poupou üíñ</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
*{
  box-sizing:border-box;
  font-family:"Poppins","Comic Sans MS",sans-serif;
}

/* üå∏ Fond fleurs */
body{
  margin:0;
  min-height:100vh;
  overflow:hidden;

  background:
    url("https://www.transparenttextures.com/patterns/flowers.png"),
    linear-gradient(135deg,#ffd6e8,#ffeef5);

  background-size:200px,cover;
  background-repeat:repeat;

  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px;
}

/* üê± Chats fond rose */
#catsBg{
  position:fixed;
  inset:0;
  display:none;
  pointer-events:none;
  z-index:0;
}

.dancing-cat{
  position:absolute;
  width:95px;
  opacity:0.9;
  animation:catRise 5s linear infinite, catWiggle 1s ease-in-out infinite;
}

@keyframes catRise{
  from{ transform:translateY(120vh) rotate(0deg); }
  to{ transform:translateY(-150vh) rotate(360deg); }
}

@keyframes catWiggle{
  0%{ margin-left:0; }
  50%{ margin-left:15px; }
  100%{ margin-left:0; }
}

/* üíñ Texte sur fond rose */
#bgText{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:36px;
  color:#ff4d88;
  font-weight:bold;
  text-shadow:0 0 15px rgba(255,0,120,0.35);
  display:none;
  z-index:1;
  pointer-events:none;
}

/* Carte */
.card{
  background:white;
  width:520px;
  min-height:360px;
  padding:60px 50px;
  border-radius:36px;
  text-align:center;
  box-shadow:0 40px 80px rgba(0,0,0,0.18);
  position:relative;
  z-index:2;
  overflow:hidden;
}

/* Overlay Happy */
#happyOverlay{
  position:absolute;
  inset:0;
  background:white;
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:12px;
  z-index:3;
}

#happyOverlay h2{
  font-size:32px;
  color:#ff4d88;
  margin:0 0 8px 0;
  padding:0;
  text-align:center;
  line-height:1.1;
}

#happyOverlay img{
  width:100%;
  height:65vh;
  object-fit:cover;
  object-position:center;
  border-radius:20px;
  display:block;
}

/* ‚úÖ Images haut ‚Äî dimensionnement propre */
.top-media{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:20px;
  margin-bottom:20px;
}

/* toutes les images du haut ont la m√™me taille */
.top-media img{
  width:120px;
  height:120px;
  object-fit:cover;
  object-position:center;
  border-radius:14px;
  display:block;
}

h1{
  font-size:24px;
  margin-bottom:40px;
}

.buttons{
  display:flex;
  justify-content:center;
  gap:24px;
}

button{
  border:none;
  padding:16px 30px;
  border-radius:999px;
  font-size:17px;
  cursor:pointer;
}

#yesBtn{ background:#ff4d88; color:white; }
#noBtn{ background:#ccc; color:#555; }

.note{
  margin-top:20px;
  font-size:14px;
  color:#999;
}

.msg-text{
  display:inline-flex;
  align-items:center;
  gap:6px;
}

.Chat_Heureux-img{
  width:24px;
  height:24px;
  object-fit:cover;
  border-radius:6px;
}
</style>
</head>

<body>

<!-- üê± BEAUCOUP DE CHATS -->
<div id="catsBg">
  <img src="Chat.gif" class="dancing-cat" style="left:2%;  animation-delay:0s;">
  <img src="Chat.gif" class="dancing-cat" style="left:6%;  animation-delay:0.5s;">
  <img src="Chat.gif" class="dancing-cat" style="left:10%; animation-delay:1s;">
  <img src="Chat.gif" class="dancing-cat" style="left:14%; animation-delay:1.5s;">
  <img src="Chat.gif" class="dancing-cat" style="left:18%; animation-delay:2s;">
  <img src="Chat.gif" class="dancing-cat" style="left:22%; animation-delay:2.5s;">
  <img src="Chat.gif" class="dancing-cat" style="left:26%; animation-delay:3s;">
  <img src="Chat.gif" class="dancing-cat" style="left:30%; animation-delay:0.3s;">
  <img src="Chat.gif" class="dancing-cat" style="left:34%; animation-delay:0.8s;">
  <img src="Chat.gif" class="dancing-cat" style="left:38%; animation-delay:1.3s;">
  <img src="Chat.gif" class="dancing-cat" style="left:42%; animation-delay:1.8s;">
  <img src="Chat.gif" class="dancing-cat" style="left:46%; animation-delay:2.3s;">
  <img src="Chat.gif" class="dancing-cat" style="left:50%; animation-delay:2.8s;">
  <img src="Chat.gif" class="dancing-cat" style="left:54%; animation-delay:0.6s;">
  <img src="Chat.gif" class="dancing-cat" style="left:58%; animation-delay:1.1s;">
  <img src="Chat.gif" class="dancing-cat" style="left:62%; animation-delay:1.6s;">
  <img src="Chat.gif" class="dancing-cat" style="left:66%; animation-delay:2.1s;">
  <img src="Chat.gif" class="dancing-cat" style="left:70%; animation-delay:2.6s;">
  <img src="Chat.gif" class="dancing-cat" style="left:74%; animation-delay:0.4s;">
  <img src="Chat.gif" class="dancing-cat" style="left:78%; animation-delay:0.9s;">
  <img src="Chat.gif" class="dancing-cat" style="left:82%; animation-delay:1.4s;">
  <img src="Chat.gif" class="dancing-cat" style="left:86%; animation-delay:1.9s;">
  <img src="Chat.gif" class="dancing-cat" style="left:90%; animation-delay:2.4s;">
  <img src="Chat.gif" class="dancing-cat" style="left:94%; animation-delay:2.9s;">
  <img src="Chat.gif" class="dancing-cat" style="left:98%; animation-delay:3.4s;">
</div>

<!-- üíñ Texte fond rose -->
<div id="bgText">Date night? üåπ</div>

<div class="card">

  <!-- Overlay Happy -->
  <div id="happyOverlay">
    <h2>Pookie Happy!!!!!</h2>
    <img src="Singe_heureux.jpg" alt="Singe heureux">
  </div>

  <!-- Images -->
  <div class="top-media">
    <img src="singe_pense.png" alt="singe_pense">

    <!-- ‚úÖ Celle-ci appara√Æt apr√®s 5 fuites -->
    <img id="monkeyHairImg" src="Monkey With Hair.jpg" alt="Monkey With Hair" style="display:none;">

    <img src="Chat.gif" alt="Chat">
  </div>

  <h1>Poupou, veux-tu √™tre ma valentine?</h1>

  <div class="buttons">
    <button id="yesBtn">Oui üíñ</button>
    <button id="noBtn">Non üôÉ</button>
  </div>

  <div id="noMessage" class="note" style="display:none;">
    <span class="msg-text">
      Non n‚Äôest pas une option
      <img src="Chat_Heureux.jpg" class="Chat_Heureux-img" alt="Chat_Heureux">
    </span>
  </div>

</div>

<script>
const noBtn=document.getElementById("noBtn");
const yesBtn=document.getElementById("yesBtn");
const noMessage=document.getElementById("noMessage");
const monkeyHairImg=document.getElementById("monkeyHairImg");
const happyOverlay=document.getElementById("happyOverlay");
const catsBg=document.getElementById("catsBg");
const bgText=document.getElementById("bgText");

let escapeCount=0;
let escaped=false;
let initialRect=null;

function escapeNoButton(){
  noMessage.style.display="block";
  escapeCount++;

  // ‚úÖ Affiche Monkey With Hair apr√®s 5 fuites
  if(escapeCount>=5 && monkeyHairImg){
    monkeyHairImg.style.display="block";
  }

  // Texte √©volutif du bouton
  if(escapeCount>=12){
    noBtn.innerText="Ok je comprend, je vais aller voir Thea üíÄ";
  } else if(escapeCount>=9){
    noBtn.innerText="Damnnnnn üò≠";
  } else if(escapeCount>=6){
    noBtn.innerText="Quoi?!?! üò≥";
  } else if(escapeCount>=3){
    noBtn.innerText="Tu peux pas m‚Äôattraper üòè";
  }

  // Verrouille la position initiale la premi√®re fois, puis fuit
  if(!escaped){
    initialRect=noBtn.getBoundingClientRect();
    noBtn.style.position="fixed";
    noBtn.style.left=initialRect.left+"px";
    noBtn.style.top=initialRect.top+"px";
    escaped=true;
  }

  const padding=20;
  const yesRect=yesBtn.getBoundingClientRect();
  const noRect=noBtn.getBoundingClientRect();

  let x,y,safe;
  do{
    x=Math.random()*(window.innerWidth-noRect.width-padding);
    y=Math.random()*(window.innerHeight-noRect.height-padding);

    safe =
      x + noRect.width < yesRect.left ||
      x > yesRect.right ||
      y + noRect.height < yesRect.top ||
      y > yesRect.bottom;
  }while(!safe);

  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
}

// Fuite sur desktop quand la souris est proche
document.addEventListener("mousemove",(e)=>{
  const rect=noBtn.getBoundingClientRect();
  const cx=rect.left+rect.width/2;
  const cy=rect.top+rect.height/2;
  const distance=Math.hypot(e.clientX-cx,e.clientY-cy);

  if(distance<90){
    escapeNoButton();
  }
});

// Mobile: fuit au toucher
document.addEventListener("touchstart", escapeNoButton);

// Oui: overlay + chats + texte fond + confettis c√¥t√©s
yesBtn.addEventListener("click",()=>{
  happyOverlay.style.display="flex";
  catsBg.style.display="block";
  bgText.style.display="block";

  const end=Date.now()+4000;

  (function frame(){
    confetti({particleCount:6,angle:60,spread:70,origin:{x:0}});
    confetti({particleCount:6,angle:120,spread:70,origin:{x:1}});
    if(Date.now()<end)requestAnimationFrame(frame);
  })();
});
</script>

</body>
</html>
